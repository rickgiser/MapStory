/**
 * Created by Super洛伽 on 2016/11/19.
 */
EarthWork={};require(['Source/Cesium','ThirdParty/echarts'],function(Cesium,echarts){var prototype=EarthWork;prototype.createEarth=function(id){var viewer=new Cesium.Viewer(id,{animation:true,baseLayerPicker:false,fullscreenButton:false,vrButton:false,geocoder:true,homeButton:false,infoBox:false,sceneModePicker:true,selectionIndicator:false,timeline:true,navigationHelpButton:false});handler=new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);handler.setInputAction(function(movement){var cartesian=viewer.camera.pickEllipsoid(movement.endPosition,viewer.scene.globe.ellipsoid);if(cartesian){var cartographic=Cesium.Cartographic.fromCartesian(cartesian);var longitudeString=Cesium.Math.toDegrees(cartographic.longitude).toFixed(6);var latitudeString=Cesium.Math.toDegrees(cartographic.latitude).toFixed(6);var content="lon:"+longitudeString+"°, lat:"+latitudeString+"°";$("#location").html(content)}},Cesium.ScreenSpaceEventType.MOUSE_MOVE);viewer._cesiumWidget._creditContainer.style.display="none";$(".cesium-viewer-animationContainer").css("display","none");$(".cesium-viewer-timelineContainer").css("display","none");viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(116,46.12,8000000.0)});return viewer};prototype.earthRotate=function(){viewer.clock.multiplier=3*60*60;viewer.scene.preRender.addEventListener(icrf);viewer.scene.globe.enableLighting=true;function icrf(scene,time){if(scene.mode!==Cesium.SceneMode.SCENE3D){return}var icrfToFixed=Cesium.Transforms.computeIcrfToFixedMatrix(time);if(Cesium.defined(icrfToFixed)){var camera=viewer.camera;var offset=Cesium.Cartesian3.clone(camera.position);var transform=Cesium.Matrix4.fromRotationTranslation(icrfToFixed);camera.lookAtTransform(transform,offset)}}return icrf};prototype.cancelEarthRotate=function(){viewer.clock.multiplier=1.0;viewer.scene.preRender.removeEventListener(rota);viewer.scene.globe.enableLighting=false;viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(116,46.12,8000000.0)})};prototype.defaultCamera=function(){viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(116,46.12,8000000.0)})};prototype.drawEchart1=function(){var dom=document.getElementById("container");var myChart=echarts.init(dom);var app={};option=null;app.title='堆叠条形图';option={tooltip:{trigger:'axis',axisPointer:{type:'shadow'}},legend:{data:['直接访问','邮件营销','联盟广告','视频广告','搜索引擎']},grid:{left:'3%',right:'4%',bottom:'3%',containLabel:true},xAxis:{type:'value'},yAxis:{type:'category',data:['周一','周二','周三','周四','周五','周六','周日']},series:[{name:'直接访问',type:'bar',stack:'总量',label:{normal:{show:true,position:'insideRight'}},data:[320,302,301,334,390,330,320]},{name:'邮件营销',type:'bar',stack:'总量',label:{normal:{show:true,position:'insideRight'}},data:[120,132,101,134,90,230,210]},{name:'联盟广告',type:'bar',stack:'总量',label:{normal:{show:true,position:'insideRight'}},data:[220,182,191,234,290,330,310]},{name:'视频广告',type:'bar',stack:'总量',label:{normal:{show:true,position:'insideRight'}},data:[150,212,201,154,190,330,410]},{name:'搜索引擎',type:'bar',stack:'总量',label:{normal:{show:true,position:'insideRight'}},data:[820,832,901,934,1290,1330,1320]}]};if(option&&typeof option==="object"){myChart.setOption(option,true)}};prototype.drawEchart2=function(){var dom=document.getElementById("container");var myChart=echarts.init(dom);var app={};option=null;var data=[];for(var i=0;i<=360;i++){var t=i/180*Math.PI;var r=Math.sin(2*t)*Math.cos(2*t);data.push([r,i])}option={title:{text:'极坐标双数值轴'},legend:{data:['line']},polar:{center:['50%','54%']},tooltip:{trigger:'axis',axisPointer:{type:'cross'}},angleAxis:{type:'value',startAngle:0},radiusAxis:{min:0},series:[{coordinateSystem:'polar',name:'line',type:'line',showSymbol:false,data:data}],animationDuration:2000};if(option&&typeof option==="object"){myChart.setOption(option,true)}};prototype.createEagleMap=function(options){$("#"+options.id+"").css({"display":"block","z-index":"8","position":"absolute","bottom":"34px","width":"400px","height":"200px","border":"1px solid #2b7fc7"});var eagleViewer=new Cesium.Viewer(options.id,{animation:false,baseLayerPicker:false,fullscreenButton:false,vrButton:false,geocoder:false,homeButton:false,infoBox:false,sceneModePicker:false,selectionIndicator:false,timeline:false,navigationHelpButton:false,sceneMode:Cesium.SceneMode.SCENE2D,imageryProvider:new Cesium.BingMapsImageryProvider({url:'https://dev.virtualearth.net'})});eagleViewer._cesiumWidget._creditContainer.style.display="none";var handler=new Cesium.ScreenSpaceEventHandler(eagleViewer.scene.canvas);handler.setInputAction(function(movement){var cartesian=eagleViewer.camera.pickEllipsoid(movement.position,viewer.scene.globe.ellipsoid);var cartographic=Cesium.Cartographic.fromCartesian(cartesian);cartographic.height=1000000;var position=viewer.scene.globe.ellipsoid.cartographicToCartesian(cartographic);viewer.camera.flyTo({destination:position})},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);ff();function ff(){var west=Cesium.Math.toRadians(-180.0);var south=Cesium.Math.toRadians(-90.0);var east=Cesium.Math.toRadians(180.0);var north=Cesium.Math.toRadians(90.0);var maxExtent=new Cesium.Rectangle(west,south,east,north);eagleViewer.scene.screenSpaceCameraController.inertiaTranslate=0;eagleViewer.clock.onTick.addEventListener(function(){if(viewer.scene.mode===Cesium.SceneMode.SCENE2D){var topLeft=eagleViewer.scene.globe.pick(eagleViewer.camera.getPickRay(new Cesium.Cartesian2(0,0)),eagleViewer.scene);var topRight=eagleViewer.scene.globe.pick(eagleViewer.camera.getPickRay(new Cesium.Cartesian2(eagleViewer.canvas.clientWidth,0)),eagleViewer.scene);var bottomLeft=eagleViewer.scene.globe.pick(eagleViewer.camera.getPickRay(new Cesium.Cartesian2(0,eagleViewer.canvas.clientHeight)),eagleViewer.scene);var bottomRight=eagleViewer.scene.globe.pick(eagleViewer.camera.getPickRay(new Cesium.Cartesian2(eagleViewer.canvas.clientWidth,eagleViewer.canvas.clientHeight)),eagleViewer.scene);if(topLeft&&topRight&&bottomLeft&&bottomRight){topLeft=Cesium.Ellipsoid.WGS84.cartesianToCartographic(topLeft);topRight=Cesium.Ellipsoid.WGS84.cartesianToCartographic(topRight);bottomLeft=Cesium.Ellipsoid.WGS84.cartesianToCartographic(bottomLeft);bottomRight=Cesium.Ellipsoid.WGS84.cartesianToCartographic(bottomRight);var visibleExtent=Cesium.Rectangle.fromCartographicArray([topLeft,topRight,bottomLeft,bottomRight]);if(!maxExtent.contains(visibleExtent)){var validExtent=Cesium.Rectangle.intersection(maxExtent,visibleExtent);eagleViewer.scene.camera.setView({destination:validExtent})}}}else{eagleViewer.scene.camera.setView({destination:maxExtent})}})}return eagleViewer}});